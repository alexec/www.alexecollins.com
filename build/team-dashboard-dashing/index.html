<!doctype html> <html> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1.0"> <meta name=google-site-verification content=459WLyNfyiKwT7T3IzdCjzIpNP-IVQSOb4tR8b2vQhI /> <title>Alex Collins - Team Dashboard with Dashing</title> <link href="/css/bootstrap.min.css" media=screen rel=stylesheet /> <style type="text/css">
.highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight {
  color: #faf6e4;
  background-color: #122b3b;
}
.highlight .gl {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #6c8b9f;
  font-style: italic;
}
.highlight .cp {
  color: #b2fd6d;
  font-weight: bold;
  font-style: italic;
}
.highlight .err {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .gr {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .k, .highlight .kd, .highlight .kv {
  color: #f6dd62;
  font-weight: bold;
}
.highlight .o, .highlight .ow {
  color: #4df4ff;
}
.highlight .p, .highlight .pi {
  color: #4df4ff;
}
.highlight .gd {
  color: #cc0000;
}
.highlight .gi {
  color: #b2fd6d;
}
.highlight .ge {
  font-style: italic;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gt {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .kc {
  color: #f696db;
  font-weight: bold;
}
.highlight .kn {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kp {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kr {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gh {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gu {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kt {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .no {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nc {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nd {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nn {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .bp {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .ne {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nl {
  color: #ffb000;
  font-weight: bold;
}
.highlight .nt {
  color: #ffb000;
  font-weight: bold;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #f696db;
  font-weight: bold;
}
.highlight .ld {
  color: #f696db;
  font-weight: bold;
}
.highlight .ss {
  color: #f696db;
  font-weight: bold;
}
.highlight .s, .highlight .sb, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .sr, .highlight .s1 {
  color: #fff0a6;
  font-weight: bold;
}
.highlight .se {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .sc {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .si {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .nb {
  font-weight: bold;
}
.highlight .ni {
  color: #999999;
  font-weight: bold;
}
.highlight .w {
  color: #BBBBBB;
}
.highlight .nf {
  color: #a8e1fe;
}
.highlight .py {
  color: #a8e1fe;
}
.highlight .na {
  color: #a8e1fe;
}
.highlight .nv, .highlight .vc, .highlight .vg, .highlight .vi {
  color: #a8e1fe;
  font-weight: bold;
}	.article img {
		border: 1px solid #bbb;
		display: block;
		margin-left: auto;
		margin-right: auto;
		padding: 10px;
	}
	@media print {
		#disqus_thread, #sidebar {
    			display:none;
  		}
	}
</style> <link href="https://plus.google.com/101694420547181110548" rel=publisher /> </head> <body class="team-dashboard-dashing team-dashboard-dashing_index"> <div class=container> <div class=row> <div class="col-md-9 article"> <h1>Team Dashboard with Dashing</h1> <table class=table> <tr> <td> <center> <a href="//selenium-webdriver-in-practice.github.io"><img src="/images/liang_cover100.jpg" class=thumbnail /></a> </center> </td> <td> <p class=well><b>Big news!</b> I've been working hard getting <b>Selenium WebDriver in Practice</b> ready and it is now available to buy on the <a href="//selenium-webdriver-in-practice.github.io">Manning Early Access Program</a>. It provides practical and useful techniques you can use with WebDriver, to get the very best out of it in your projects.</p> </td> </tr> </table> <p>I've been setting up a dashboard for my team to display metrics. After looking around at the various options (and having an abortive stab at writing a framework myself) I found and OSS version called <a href="//shopify.github.io/dashing/">Dashing written by Shopify</a> that suited the needs.</p> <p>There's a <a href="//www.youtube.com/watch?v=TbGbm1cE6M0">nice example on YouTube</a> which I think gives a better feel than the built in samples.</p> <p>I thought I'd put a few hints and tips after what I've learnt.</p> <p>Why do you want a team dashboard? A dashboard can provide an overview of the team's status, and highlight actions that need to be taken. The ones we've got include:</p> <p>Actionable tiles:</p> <ul> <li>Build status. Which builds (of the 41 builds) that are broken, and who the CI thinks broken them. This goes red if builds are broken and indicates who needs to fix the build.</li> <li>Failing tests. Again, which tests are failing and who the CI thinks broke them. Since the test's package can indicate which feature needs fixing, this also indicates who might want to take a look.</li> <li>Recorded time. Who has not recorded their time in the timesheet system.</li> <li>New tickets. Untriaged tickets in the bug tracking system, that need to be triaged.</li> <li>Overdue code reviews.</li> </ul> <p>Information tiles:</p> <ul> <li>Recent commits. This shows what we're working on.</li> <li>Beer clock: On Fridays, how many hours to free beer.</li> <li>Assigned tickets. Tickets we're working on.</li> <li>Test coverage.</li> </ul> <p>What do you notice here? More tiles are actionable rather than informative, and therefore more useful. The current weather or the company stock prices do not feature. It's not an executive dashboard, it is a team dashboard.</p> <p>What else do you notice? Each metrics comes from a different system. Build information might be from Jenkins or Bamboo, tickets from JIRA or RT, and the timesheet information might be <a href="//www.youtube.com/watch?v=cJMRKB3RU_s">from a spreadsheet</a>. This means you'll need to write a script to periodically extract the data and post it to the dashboard - there's a good chance you won't find a built it one that fits your exact requirements. Assume you'll need to write some of you own, but do not fear - this is almost trivially easy!</p> <h2>Creating a Widget</h2> <p>This tutorial will create a dashboard with a single widget:</p> <p><img src="https://raw.github.com/alexec/dashing-example/master/screenshot.png"/></p> <p>To install Dashing you need Ruby 1.9 (I'd recommend <a href="https://rvm.io">RVM</a>), and then execute:</p> <pre class="highlight plaintext">dashing new example-dashboard
cd example-dashboard
bundle install &amp;amp;&amp;amp; dashing start
</pre> <p>This creates a set of samples you can look at by navigating to <a href="//localhost:3030/sample">http://localhost:3030/sample</a>.</p> <p>Lets create a widget that shows informatain about failing builds. It'll be closely related to <a href="https://gist.github.com/EHadoux/5196209">a Sonar Gist</a>, and follows a common set-of steps:</p> <ul> <li>Get same data from a URL, possbily having to authenticate.</li> <li>Parse that data (if it is HTML we can use a Ruby library called Mechianize).</li> <li>Loop though the data to find the interesting information.</li> <li>Filter that information, e.g. based on status.</li> <li>Post that information to one of more widgets.</li> </ul> <pre class="highlight plaintext">    SCHEDULER.every '15m', :first_in =&gt; 0 do |job|
        builds=config[:builds].map{|repo|
            status=JSON(get("https://api.travis-ci.org/repositories/#{config[:user]}//#{repo}/builds.json"))[0]['result']?'ok':'failing'
            {:repo =&gt; repo, :status =&gt; status}
        }
        failing_builds=builds.find_all{|build| build[:status]!='ok'}
            send_event('travis_builds', {
            :items =&gt; builds.map{|build| {:label =&gt; "#{build[:repo]} #{build[:status]}"}},
            :moreinfo =&gt; "#{failing_builds.length}/#{builds.length} failing",
            :status =&gt; (failing_builds.length&gt;0?'warning':'ok')
        })
    end
</pre> <p>To create the widget I've copied the widgets/list to widgets/travis_builds and added this to the code to change the colour of the widget based on status:</p> <pre class="highlight plaintext">     if data.status
       # clear existing "status-*" classes
       $(@get('node')).attr 'class', (i,c) -&amp;gt;
         c.replace /status-\\S+/g, ''
       # add new class
       $(@get('node')).addClass "status-#{data.status}"
</pre> <h2>Installing as a On a PC</h2> <p>You'll want to run this on a Linux computer with a monitor mounted in a suitable place.</p> <p>I've <a href="https://raw.github.com/alexec/dashing-example/master/dashboard.sh">written a script to start this as service on Linux</a>. You'll need to add a cd to change to the correct directory.</p> <p>If you want to be eco-friendly you can turn the screen on and off at suitable times using xset, put this in your crontab:</p> <pre class="highlight plaintext">0 9 1-5 * * xset dpms force on
# turn off at 6/7/8pm everyday (just in case it get knocked on by accident)
0 18,19,20 * * * xset dpms force off
</pre> <p>Now you have a few options for the actual display.</p> <p>A simple and fully featured, but insecure, option would be to use a browser fullscreen and disable the screensaver.</p> <p>A more secure, but quite hacky option would be to <a href="//forums.pcbsd.org/showthread.php?t=5878">set-up xscreensaver to rotate thought</a> a directory of <a href="https://github.com/ariya/phantomjs/wiki/Screen-Capture">screenshots taken by phantomjs</a>.</p> <p>I'd love to hear from anyone with a better compromise!</p> <h2>References</h2> <p>Code for this post can be <a href="https://github.com/alexec/dashing-example">found on Github</a>. Another widgets can be <a href="https://github.com/Shopify/dashing/wiki/Additional-Widgets">found amongst the additional widgets page</a>. <a href="//shopify.github.io/dashing/">The guide</a> gives an example of creating your own widget.</p> <h4>Related</h4> <ol> <li><a href="/first-steps-middleman/">First Steps with Middleman</a></li> <li><a href="/migrating-from-drupal-to-middleman/">Migrating from Drupal to Middleman</a></li> </ol> <div id=disqus_thread></div> <script>
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'alexecollins'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> <div class=col-md-3 id=sidebar> <center> <h2>Alex Collins</h2> <p> <a href="/"><img src="/images/alex-collins-circle.png"/></a> </p> </center> <p> Java technical lead and solutions architect in London for the UK IT industry for over ten years. <a href="/about-me">more...</a> </p> <h4>Docker Maven Plugin</h4> <p>Version 2.11.7 released, <a href="https://github.com/alexec/docker-maven-plugin/blob/master/CHANGELOG.md">more...</a></p> <pre style="font-size:50%">&lt;dependency&gt;
  &lt;groupId&gt;com.alexecollins.docker&lt;/groupId&gt;
  &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;2.11.7&lt;/version&gt;
&lt;/dependency&gt;</pre> <h4>Recent</h4> <ul> <li><a href="/developing-with-docker-debug-container/">Developing With Docker - The Debug Container</a> <span>Dec 9</span></li> <li><a href="/developing-with-docker-proxy-container/">Developing With Docker - Using A Proxy Container To Make Development Easier</a> <span>Nov 28</span></li> <li><a href="/practical-domain-specific-language-tutorial/">Practical Java Domain Specific Language Tutorial</a> <span>Sep 19</span></li> <li><a href="/sonarqube-and-java-8/">Sonarqube And Java 8</a> <span>Sep 17</span></li> <li><a href="/spring-boot-performance/">Spring Boot Performance</a> <span>Sep 5</span></li> </ul> <h4>Tags</h4> <a href="/tags/ci/">ci</a> (3)</a>&nbsp;&nbsp; <a href="/tags/concurrency/">concurrency</a> (4)</a>&nbsp;&nbsp; <a href="/tags/docker/">docker</a> (12)</a>&nbsp;&nbsp; <a href="/tags/gist/">gist</a> (13)</a>&nbsp;&nbsp; <a href="/tags/groovy/">groovy</a> (4)</a>&nbsp;&nbsp; <a href="/tags/java/">java</a> (48)</a>&nbsp;&nbsp; <a href="/tags/jmeter/">jmeter</a> (3)</a>&nbsp;&nbsp; <a href="/tags/junit/">junit</a> (7)</a>&nbsp;&nbsp; <a href="/tags/links/">links</a> (14)</a>&nbsp;&nbsp; <a href="/tags/maven/">maven</a> (18)</a>&nbsp;&nbsp; <a href="/tags/oped/">oped</a> (8)</a>&nbsp;&nbsp; <a href="/tags/performance/">performance</a> (6)</a>&nbsp;&nbsp; <a href="/tags/plaf/">plaf</a> (14)</a>&nbsp;&nbsp; <a href="/tags/ruby/">ruby</a> (3)</a>&nbsp;&nbsp; <a href="/tags/selenium/">selenium</a> (9)</a>&nbsp;&nbsp; <a href="/tags/software/">software</a> (10)</a>&nbsp;&nbsp; <a href="/tags/spring/">spring</a> (7)</a>&nbsp;&nbsp; <a href="/tags/swing/">swing</a> (15)</a>&nbsp;&nbsp; <a href="/tags/testing/">testing</a> (23)</a>&nbsp;&nbsp; <a href="/tags/tips/">tips</a> (4)</a>&nbsp;&nbsp; <a href="/tags/tomcat/">tomcat</a> (3)</a>&nbsp;&nbsp; <a href="/tags/unix/">unix</a> (6)</a>&nbsp;&nbsp; <a href="/tags/web/">web</a> (4)</a>&nbsp;&nbsp; </hr/> <p> <a class="btn btn-primary btn-xs" href="/sitemap">Sitemap</a> <a class="btn btn-primary btn-xs" href="/feed.xml">RSS</a> <a class="btn btn-primary btn-xs" href="//uk.linkedin.com/in/alexecollins">LinkedIn</a> </p> </div> </div> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-25388993-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script> </body> </html>