<!doctype html> <html> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1.0"> <meta name=google-site-verification content=459WLyNfyiKwT7T3IzdCjzIpNP-IVQSOb4tR8b2vQhI /> <title>Alex Collins - Visual Testing With Selenium WebDriver</title> <link href="/css/bootstrap.min.css" media=screen rel=stylesheet /> <style type="text/css">
.highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight {
  color: #faf6e4;
  background-color: #122b3b;
}
.highlight .gl {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #6c8b9f;
  font-style: italic;
}
.highlight .cp {
  color: #b2fd6d;
  font-weight: bold;
  font-style: italic;
}
.highlight .err {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .gr {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .k, .highlight .kd, .highlight .kv {
  color: #f6dd62;
  font-weight: bold;
}
.highlight .o, .highlight .ow {
  color: #4df4ff;
}
.highlight .p, .highlight .pi {
  color: #4df4ff;
}
.highlight .gd {
  color: #cc0000;
}
.highlight .gi {
  color: #b2fd6d;
}
.highlight .ge {
  font-style: italic;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gt {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .kc {
  color: #f696db;
  font-weight: bold;
}
.highlight .kn {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kp {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kr {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gh {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gu {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kt {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .no {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nc {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nd {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nn {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .bp {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .ne {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nl {
  color: #ffb000;
  font-weight: bold;
}
.highlight .nt {
  color: #ffb000;
  font-weight: bold;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #f696db;
  font-weight: bold;
}
.highlight .ld {
  color: #f696db;
  font-weight: bold;
}
.highlight .ss {
  color: #f696db;
  font-weight: bold;
}
.highlight .s, .highlight .sb, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .sr, .highlight .s1 {
  color: #fff0a6;
  font-weight: bold;
}
.highlight .se {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .sc {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .si {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .nb {
  font-weight: bold;
}
.highlight .ni {
  color: #999999;
  font-weight: bold;
}
.highlight .w {
  color: #BBBBBB;
}
.highlight .nf {
  color: #a8e1fe;
}
.highlight .py {
  color: #a8e1fe;
}
.highlight .na {
  color: #a8e1fe;
}
.highlight .nv, .highlight .vc, .highlight .vg, .highlight .vi {
  color: #a8e1fe;
  font-weight: bold;
}	.article img {
		border: 1px solid #bbb;
		display: block;
		margin-left: auto;
		margin-right: auto;
		padding: 10px;
	}
	@media print {
		#disqus_thread, #sidebar {
    			display:none;
  		}
	}
</style> <link href="https://plus.google.com/101694420547181110548" rel=publisher /> </head> <body class="selenium-visual-testing selenium-visual-testing_index"> <div class=container> <div class=row> <div class="col-md-9 article"> <h1>Visual Testing With Selenium WebDriver</h1> <table class=table> <tr> <td> <center> <a href="//selenium-webdriver-in-practice.github.io"><img src="/images/liang_cover100.jpg" class=thumbnail /></a> </center> </td> <td> <p class=well><b>Big news!</b> I've been working hard getting <b>Selenium WebDriver in Practice</b> ready and it is now available to buy on the <a href="//selenium-webdriver-in-practice.github.io">Manning Early Access Program</a>. It provides practical and useful techniques you can use with WebDriver, to get the very best out of it in your projects.</p> </td> </tr> </table> <h2 id=problem>Problem</h2> <p>You want to do <strong>Visual Testing</strong> to make sure the same web site looks and acts the same in different browsers. However, a normal Selenium WebDriver unit test only uses a single browser, and you want to avoid copy and pasting the test with different drivers in it.</p> <h2 id=solution>Solution</h2> <ol> <li>Set-up a <strong>mini Selenium Grid</strong>, hosted on your desktop using Docker.</li> <li>Create a <strong><code>WebDriverSupplier</code></strong> to give us the appropriate driver for our test.</li> <li>Create a <strong>JUnit runner</strong> that runs your test multiple times, using <code>@Inject</code> to set the driver, and allowing you to take a screenshot on multiple browsers, but having to write only one test.</li> <li>Create a <strong>unit test</strong> that uses the runner.</li> </ol> <h3 id=mini-selenium-grid>Mini-Selenium Grid</h3> <p>You'll want to get the code for this to start with:</p> <pre class="highlight plaintext">git clone https://github.com/alexec/selenium-visual-testing.git
cd selenium-visual-testing
</pre> <p>If you don't have access to a Selenium Grid, but you have access to Docker, the code for this project has is a mini-grid you can run locally:</p> <pre class="highlight plaintext">mvn docker:package
mvn docker:start
</pre> <p>After some time, this starts up a Selenium Hub with one Chrome and one Firefox node. This will allow you to test in those two browsers. You can stop the grid at any time if you've done using:</p> <pre class="highlight plaintext">mvn docker:stop
</pre> <p>You can check your grid is up by opening <a href="//localhost:4444">http://localhost:4444</a> and you should see this:</p> <p><img alt="Selenium Hub Homepage" src="/images/selenium-visual-testing/selenium-hub-homepage.png"/></p> <h3 id=creating-a-web-driver-supplier>Creating A Web Driver Supplier</h3> <p>To make it easy to change driver in our tests, you're going to create a class called <code>WebDriverSupplier</code>. This will provide an instance of a <code>WebDriver</code>, based on the capabilities you request. This a good pattern to use with Selenium, as it allows you to change the driver, without having to change your tests. It can also make sure that we clean up our driver after you've finished with it.</p> <p>How will it work?</p> <ol> <li>If it already has created a web driver for the capabilities you ask for, return it.</li> <li>Otherwise, close the current driver, and create a new one matching the requested capabilities.</li> </ol> <pre class="highlight java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebDriverSupplier</span> <span class="kd">implements</span> <span class="n">Closeable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">WebDriver</span> <span class="n">driver</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span><span class="o">;;</span>

    <span class="kd">public</span> <span class="n">WebDriver</span> <span class="n">get</span><span class="o">(</span><span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// #1 if the driver we already has does not match what we want, close it</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">desiredCapabilities</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">desiredCapabilities</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">driver</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">// #2 create a new driver, note that we augment it </span>
                <span class="c1">//    so that it can create screen shots</span>
                <span class="k">this</span><span class="o">.</span><span class="na">driver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Augmenter</span><span class="o">().</span><span class="na">augment</span><span class="o">(</span><span class="k">new</span> <span class="n">RemoteWebDriver</span><span class="o">(</span>
                        <span class="c1">// #3 this is the URL of out grid, change this to </span>
                        <span class="c1">//    point to your if you're not using docker</span>
                        <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://localhost:4444/wd/hub"</span><span class="o">),</span>
                        <span class="n">desiredCapabilities</span><span class="o">));</span>
                <span class="k">this</span><span class="o">.</span><span class="na">desiredCapabilities</span> <span class="o">=</span> <span class="n">desiredCapabilities</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">MalformedURLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">driver</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="n">close</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">driver</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
            <span class="c1">// #4 close the driver down when we've finished with it to free up resources</span>
            <span class="n">driver</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="n">driver</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre> <h3 id=junit-selenium-runner>JUnit Selenium Runner</h3> <p>The next part of our puzzle is a custom JUnit <strong>suite runner</strong>. This is a pretty advanced topic, and it's not often you need to create a runner. However, there are some common examples you may have use such as the <code>Parameterized</code> runner, and Spring's <code>SpringJUnit4ClassRunner</code>. If you've ever wondered how they work, hopefully you'll gain some clarity here.</p> <p>Our suite runner is like a factory for tests:</p> <pre class="highlight java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SeleniumRunner</span> <span class="kd">extends</span> <span class="n">Suite</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">WebDriverSupplier</span> <span class="n">WEB_DRIVER_SUPPLIER</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebDriverSupplier</span><span class="o">();</span>

    <span class="c1">// #1 a list of the different browser configurations we want</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">DesiredCapabilities</span><span class="o">&gt;</span> <span class="n">DESIRED_CAPABILITIES</span> <span class="o">=</span>
            <span class="n">asList</span><span class="o">(</span><span class="n">DesiredCapabilities</span><span class="o">.</span><span class="na">chrome</span><span class="o">(),</span> <span class="n">DesiredCapabilities</span><span class="o">.</span><span class="na">firefox</span><span class="o">());</span>

    <span class="kd">public</span> <span class="n">SeleniumRunner</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">klass</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">InitializationError</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">klass</span><span class="o">,</span> <span class="n">createRunners</span><span class="o">(</span><span class="n">klass</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="c1">// #2 this method creates one runner per configuration</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Runner</span><span class="o">&gt;</span> <span class="n">createRunners</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">klass</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">InitializationError</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Runner</span><span class="o">&gt;</span> <span class="n">runners</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Runner</span><span class="o">&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span> <span class="o">:</span> <span class="n">DESIRED_CAPABILITIES</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// #3 the actual running of the test is delegate to a DesiredCapabilitiesRunner</span>
            <span class="c1">//    telling it the capabilities we need</span>
            <span class="n">runners</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">DesiredCapabilitiesRunner</span><span class="o">(</span><span class="n">desiredCapabilities</span><span class="o">,</span> <span class="n">klass</span><span class="o">,</span> <span class="n">WEB_DRIVER_SUPPLIER</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">runners</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre> <p>Next, you need a class to actually run the test. This is called a <strong>class runner</strong>. You can think of a class as a test. This will be responsible for injecting the web driver into the test class, as well injecting the capabilities of the web driver into the test class, which you'll use later on. Two interesting methods here are <code>withBefores</code> and <code>inject</code> which perform a primitive form of dependency injection into the test class.</p> <pre class="highlight java"><span class="kd">class</span> <span class="nc">DesiredCapabilitiesRunner</span> <span class="kd">extends</span> <span class="n">BlockJUnit4ClassRunner</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">WebDriverSupplier</span> <span class="n">webDriverSupplier</span><span class="o">;</span>

    <span class="n">DesiredCapabilitiesRunner</span><span class="o">(</span><span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">klass</span><span class="o">,</span>
                              <span class="n">WebDriverSupplier</span> <span class="n">webDriverSupplier</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">InitializationError</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">klass</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">desiredCapabilities</span> <span class="o">=</span> <span class="n">desiredCapabilities</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">webDriverSupplier</span> <span class="o">=</span> <span class="n">webDriverSupplier</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">inject</span><span class="o">(</span><span class="n">Object</span> <span class="n">target</span><span class="o">,</span> <span class="n">Object</span> <span class="n">bean</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// #1 a very primitive form of injection, we simple find any field annotated</span>
        <span class="c1">//    with @Inject and if the target has the same class, set it using</span>
        <span class="c1">//    standard Java Reflection</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Field</span> <span class="n">field</span> <span class="o">:</span> <span class="n">target</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getDeclaredFields</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">getAnnotation</span><span class="o">(</span><span class="n">Inject</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
                    <span class="n">field</span><span class="o">.</span><span class="na">getType</span><span class="o">().</span><span class="na">isAssignableFrom</span><span class="o">(</span><span class="n">bean</span><span class="o">.</span><span class="na">getClass</span><span class="o">()))</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">field</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                    <span class="n">field</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">target</span><span class="o">,</span> <span class="n">bean</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">Statement</span> <span class="n">withBefores</span><span class="o">(</span><span class="n">FrameworkMethod</span> <span class="n">method</span><span class="o">,</span> <span class="n">Object</span> <span class="n">target</span><span class="o">,</span> <span class="n">Statement</span> <span class="n">statement</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// #2 inject the web driver and the capabilities into the test class</span>
        <span class="n">inject</span><span class="o">(</span><span class="n">target</span><span class="o">,</span> <span class="n">webDriverSupplier</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">desiredCapabilities</span><span class="o">));</span>
        <span class="n">inject</span><span class="o">(</span><span class="n">target</span><span class="o">,</span> <span class="n">desiredCapabilities</span><span class="o">);</span>
        <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">withBefores</span><span class="o">(</span><span class="n">method</span><span class="o">,</span> <span class="n">target</span><span class="o">,</span> <span class="n">statement</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">String</span> <span class="n">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// #3 to make sure that the class has a clean name in the IDE</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s [%s]"</span><span class="o">,</span> <span class="kd">super</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">desiredCapabilities</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">String</span> <span class="n">testName</span><span class="o">(</span><span class="kd">final</span> <span class="n">FrameworkMethod</span> <span class="n">method</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// #4 as above, make sure that the class is clearly named in the IDE</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s [%s]"</span><span class="o">,</span> <span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">desiredCapabilities</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre> <h3 id=the-test>The Test</h3> <p>Now you've got all this test infrastructure in place, lets put it to work with a test. The site you are going test is <a href="//mybrowserinfo.com">http://mybrowserinfo.com</a>. This is a useful web site that returns information about the browser being used to view the page, and this will help show that our little framework is working.</p> <pre class="highlight java"><span class="c1">// #1 you use this annotation to tell JUnit to run the class using your custom runner</span>
<span class="nd">@RunWith</span><span class="o">(</span><span class="n">SeleniumRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ScreenshotIT</span> <span class="o">{</span>

    <span class="c1">// #2 this is our primitive injection at work</span>
    <span class="nd">@Inject</span>
    <span class="kd">private</span> <span class="n">WebDriver</span> <span class="n">driver</span><span class="o">;</span>

    <span class="nd">@Inject</span>
    <span class="kd">private</span> <span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">getMyBrowserInfo</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

        <span class="n">driver</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"http://mybrowserinfo.com"</span><span class="o">);</span>

        <span class="c1">// #3 using assertThat often give better information when a test fails</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">driver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">tagName</span><span class="o">(</span><span class="s">"h1"</span><span class="o">)).</span><span class="na">getText</span><span class="o">(),</span>
                <span class="n">containsString</span><span class="o">(</span><span class="s">"Your IP Address is"</span><span class="o">));</span>

        <span class="c1">// #4 take the screen shot, this code is pretty rough and ready, but could easily be refactored</span>
        <span class="k">assert</span> <span class="o">((</span><span class="n">TakesScreenshot</span><span class="o">)</span> <span class="n">driver</span><span class="o">)</span>
                <span class="o">.</span><span class="na">getScreenshotAs</span><span class="o">(</span><span class="n">OutputType</span><span class="o">.</span><span class="na">FILE</span><span class="o">)</span>
                <span class="o">.</span><span class="na">renameTo</span><span class="o">(</span>
                        <span class="c1">// #5 create a file name based on the URL and the browser's name, you may </span>
                        <span class="c1">//   want to change this to make it suitable for your purposes</span>
                        <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">driver</span><span class="o">.</span><span class="na">getCurrentUrl</span><span class="o">().</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">"[^a-z]"</span><span class="o">,</span> <span class="s">""</span><span class="o">)</span> <span class="o">+</span> <span class="s">"-"</span>
                                <span class="o">+</span> <span class="n">desiredCapabilities</span><span class="o">.</span><span class="na">getBrowserName</span><span class="o">()</span> <span class="o">+</span> <span class="s">".png"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre> <p>The test <code>getMyBrowserInfo</code> has a bit of rough and ready code to take a screenshot, and save it to a file. Run the test and you should see something like this in your IDE:</p> <p><img alt="Green Tests" src="/images/selenium-visual-testing/green-tests.png"/></p> <p>I hope you can clearly see the same test being run twice, but with different test configurations.</p> <p>Finally, have a look at the two screen shots you've taken:</p> <p><img alt="Screenshot Chrome" src="/images/selenium-visual-testing/screenshot-chrome.png"/> <img alt="Screenshot Firefox" src="/images/selenium-visual-testing/screenshot-firefox.png"/></p> <h2 id=discussion>Discussion</h2> <p>This tutorial introduced you to a way to use JUnit runners to run the same test under different configurations. We've used it with Selenium today, but this pattern works with other types of test as well. It is a category of testing called Configuration Testing: testing a system behaves the same, even under different configurations. </p> <p>Read more on <a href="/tags/junit/">JUnit</a>, <a href="/tags/selenium/">Selenium WebDriver</a>, and <a href="/tags/docker/">Docker</a>. Please let me know about any mistakes, small or large, in the comments below.</p> <div id=disqus_thread></div> <script>
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'alexecollins'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> <div class=col-md-3 id=sidebar> <center> <h2>Alex Collins</h2> <p> <a href="/"><img src="/images/alex-collins-circle.png"/></a> </p> </center> <p> Java technical lead and solutions architect in London for the UK IT industry for over ten years. <a href="/about-me">more...</a> </p> <h4>Docker Maven Plugin</h4> <p>Version 2.11.4 released, <a href="https://github.com/alexec/docker-maven-plugin/blob/master/CHANGELOG.md">more...</a></p> <pre style="font-size:50%">&lt;dependency&gt;
  &lt;groupId&gt;com.alexecollins.docker&lt;/groupId&gt;
  &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;2.11.4&lt;/version&gt;
&lt;/dependency&gt;</pre> <h4>Related</h4> <ol> <li><a href="/elastic-search-in-a-box-with-docker/">Search In A Box With Docker, Elastic Search, Spring Boot, and Selenium</a></li> <li><a href="/geb-selenium-cucumber-maven-tutorial/">Geb, Selenium, Cucumber & Maven Tutorial</a></li> <li><a href="/tutorial-integration-testing-selenium-part-2/">Tutorial: Integration Testing with Selenium - Part 2</a></li> <li><a href="/selenium-and-selenide/">Selenium and Selenide (vs Geb)</a></li> <li><a href="/tutorial-integration-testing-selenium-part-1/">Tutorial: Integration Testing with Selenium - Part 1</a></li> </ol> <h4>Recent</h4> <ul> <li><a href="/developing-with-docker-proxy-container-pattern/">Developing With Docker - Using The Proxy Container Pattern To Make Development Easier</a> <span>Nov 28</span></li> <li><a href="/practical-domain-specific-language-tutorial/">Practical Java Domain Specific Language Tutorial</a> <span>Sep 19</span></li> <li><a href="/sonarqube-and-java-8/">Sonarqube And Java 8</a> <span>Sep 17</span></li> <li><a href="/spring-boot-performance/">Spring Boot Performance</a> <span>Sep 5</span></li> <li><a href="/testing-anti-patterns/">Testing Anti-Patterns</a> <span>Jun 23</span></li> </ul> <h4>Tags</h4> <a href="/tags/ci/">ci</a> (3)</a>&nbsp;&nbsp; <a href="/tags/concurrency/">concurrency</a> (4)</a>&nbsp;&nbsp; <a href="/tags/docker/">docker</a> (11)</a>&nbsp;&nbsp; <a href="/tags/gist/">gist</a> (13)</a>&nbsp;&nbsp; <a href="/tags/groovy/">groovy</a> (4)</a>&nbsp;&nbsp; <a href="/tags/java/">java</a> (48)</a>&nbsp;&nbsp; <a href="/tags/jmeter/">jmeter</a> (3)</a>&nbsp;&nbsp; <a href="/tags/junit/">junit</a> (7)</a>&nbsp;&nbsp; <a href="/tags/links/">links</a> (14)</a>&nbsp;&nbsp; <a href="/tags/maven/">maven</a> (18)</a>&nbsp;&nbsp; <a href="/tags/oped/">oped</a> (8)</a>&nbsp;&nbsp; <a href="/tags/performance/">performance</a> (6)</a>&nbsp;&nbsp; <a href="/tags/plaf/">plaf</a> (14)</a>&nbsp;&nbsp; <a href="/tags/ruby/">ruby</a> (3)</a>&nbsp;&nbsp; <a href="/tags/selenium/">selenium</a> (9)</a>&nbsp;&nbsp; <a href="/tags/software/">software</a> (10)</a>&nbsp;&nbsp; <a href="/tags/spring/">spring</a> (7)</a>&nbsp;&nbsp; <a href="/tags/swing/">swing</a> (15)</a>&nbsp;&nbsp; <a href="/tags/testing/">testing</a> (23)</a>&nbsp;&nbsp; <a href="/tags/tips/">tips</a> (4)</a>&nbsp;&nbsp; <a href="/tags/tomcat/">tomcat</a> (3)</a>&nbsp;&nbsp; <a href="/tags/unix/">unix</a> (6)</a>&nbsp;&nbsp; <a href="/tags/web/">web</a> (4)</a>&nbsp;&nbsp; </hr/> <p> <a class="btn btn-primary btn-xs" href="/sitemap">Sitemap</a> <a class="btn btn-primary btn-xs" href="/feed.xml">RSS</a> <a class="btn btn-primary btn-xs" href="//uk.linkedin.com/in/alexecollins">LinkedIn</a> </p> </div> </div> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-25388993-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script> </body> </html>